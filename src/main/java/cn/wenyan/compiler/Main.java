package cn.wenyan.compiler;


import cn.wenyan.compiler.command.CommandHandler;
import cn.wenyan.compiler.script.libs.Language;
import cn.wenyan.compiler.utils.ScalaUtils;


public class Main {

    public static void main(String[] args){
        if(args.length == 1 && args[0].equals("shell")){
            WenYanShell.run();
            return;
        }
        if (args.length == 0||args[0].equals("help")){
            CommandHandler.compileCommand.entrySet().stream().forEach(x->System.out.println(x.getValue().getOption()+": "+x.getValue().help()));
        }
        WenYanCompilerImpl compiler = new WenYanCompilerImpl(false, Language.GROOVY);
        System.out.println(compiler.dispatch("吾嘗觀「「格物」」之書。方悟「取物」「置物」「列物之端」「識類」之義。\n" +
                "\n" +
                "吾有一言。曰「「「」」」。名之曰「引號」。\n" +
                "夫「引號」之一。名之曰「引起」。\n" +
                "夫「引號」之二。名之曰「引迄」。\n" +
                "吾有一列。名之曰「位名」。充「位名」\n" +
                "以「「〇」」以「「一」」以「「二」」以「「三」」以「「四」」\n" +
                "以「「五」」以「「六」」以「「七」」以「「八」」以「「九」」。\n" +
                "\n" +
                "吾有一術。名之曰「斬渾沌」。欲行是術。必先得一言。曰「渾沌語」。乃行是術曰。\n" +
                "\t吾有一列。名之曰「諸咒」。充「諸咒」以「「物」」以「「言」」以「「數」」以「「爻」」以「「列」」以「「之」」以「「也」」。\n" +
                "\t吾有一列。名之曰「渾沌碎」。\n" +
                "\t有數一。名之曰「讀」。\n" +
                "\t有數零。名之曰「層」。\n" +
                "\t吾有一言。名之曰「辭」。\n" +
                "\n" +
                "\t恆為是。若「讀」大於「渾沌語」之長者乃止也。\n" +
                "\t\t若「渾沌語」之「讀」等於「引起」者。\n" +
                "\t\t\t若「層」不等於零者。\n" +
                "\t\t\t\t夫「渾沌語」之「讀」。加其於「辭」。昔之「辭」者。今其是矣。\n" +
                "\t\t\t云云。\n" +
                "\t\t\t加「層」以一。昔之「層」者。今其是矣。\n" +
                "\t\t或若「渾沌語」之「讀」等於「引迄」者。\n" +
                "\t\t\t減「層」以一。昔之「層」者。今其是矣。\n" +
                "\t\t\t若「層」等於零者。\n" +
                "\t\t\t\t充「渾沌碎」以「辭」。\n" +
                "\t\t\t\t昔之「辭」者。今「「」」是矣。\n" +
                "\t\t\t若非。\n" +
                "\t\t\t\t夫「渾沌語」之「讀」。加其於「辭」。昔之「辭」者。今其是矣。\n" +
                "\t\t\t云云。\n" +
                "\t\t或若「層」大於零者。\n" +
                "\t\t\t夫「渾沌語」之「讀」。加其於「辭」。昔之「辭」者。今其是矣。\n" +
                "\t\t若非。\n" +
                "\t\t\t凡「諸咒」中之「咒」。\n" +
                "\t\t\t\t若「渾沌語」之「讀」等於「咒」者\n" +
                "\t\t\t\t\t充「渾沌碎」以「咒」。\n" +
                "\t\t\t\t乃止也。\n" +
                "\t\t\t云云。\n" +
                "\t\t云云。\n" +
                "\t加一以「讀」。昔之「讀」者。今其是矣云云。\n" +
                "\t乃得「渾沌碎」。\n" +
                "是謂「斬渾沌」之術也。\n" +
                "\n" +
                "\n" +
                "今有一術。名之曰「食渾沌」。欲行是術。必先得一言。曰「渾沌語」。乃行是術曰。\n" +
                "\t施「斬渾沌」於「渾沌語」。名之曰「渾沌碎」。\n" +
                "\n" +
                "\t吾有一術。名之曰「食數」。欲行是術。必先得一言。曰「數名」。乃行是術曰。\n" +
                "\t\t吾有一數。曰一。名之曰「正負」。\n" +
                "\t\t夫「數名」之一。若其等於「「負」」者。\n" +
                "\t\t\t夫「數名」之其餘。昔之「數名」者。今其是矣。\n" +
                "\t\t\t昔之「正負」者。今負一是矣。\n" +
                "\t\t云云。\n" +
                "\t\t吾有二數。名之曰「整」曰「小」。\n" +
                "\t\t吾有二數。曰一曰一。名之曰「讀」曰「小長」。\n" +
                "\t\t有爻陰。名之曰「小耶」。\n" +
                "\t\t恆為是。若「讀」大於「數名」之長者乃止也。\n" +
                "\t\t\t若「讀」等於「「·」」者\n" +
                "\t\t\t\t昔之「小耶」者。今陽是矣。\n" +
                "\t\t\t若非。\n" +
                "\t\t\t\t有數一。名之曰「位」\n" +
                "\t\t\t\t恆為是。若「位」大於「位名」之長者乃止也。\n" +
                "\t\t\t\t\t若「位名」之「位」等於「數名」之「讀」者乃止也。\n" +
                "\t\t\t\t加一以「位」。昔之「位」者。今其是矣云云。\n" +
                "\t\t\t\t減「位」以一。昔之「位」者。今其是矣。\n" +
                "\n" +
                "\t\t\t\t若「小耶」者。\n" +
                "\t\t\t\t\t乘「小」以十。加其以「位」。昔之「小」者。今其是矣。\n" +
                "\t\t\t\t\t加「小長」以一。昔之「小長」者。今其是矣。\n" +
                "\t\t\t\t若非。\n" +
                "\t\t\t\t\t乘「整」以十。加其以「位」。昔之「整」者。今其是矣。\n" +
                "\t\t\t\t云云。\n" +
                "\t\t\t云云。\n" +
                "\t\t加一以「讀」。昔之「讀」者。今其是矣云云。\n" +
                "\t\t為是「小長」遍。乘「小」以零又一分。昔之「小」者。今其是矣。云云。\n" +
                "\t\t加「整」以「小」。乘其以「正負」。乃得矣。\n" +
                "\t是謂「食數」之術也。\n" +
                "\n" +
                "\t吾有一術名之曰「食列」。欲行是術。必先得一列。曰「渾沌碎」。乃行是術曰。\n" +
                "\t\t吾有一列。名之曰「渾沌列」。\n" +
                "\t\t有數一。名之曰「讀」。\n" +
                "\t\t恆為是。若「讀」大於「渾沌碎」之長者乃止也。\n" +
                "\t\t\t夫「渾沌碎」之「讀」。名之曰「類」\n" +
                "\t\t\t若「類」等於「「數」」者。\n" +
                "\t\t\t\t加「讀」以一。夫「渾沌碎」之其。取一以施「食數」。充「渾沌列」以其。\n" +
                "\t\t\t\t加「讀」以二。昔之「讀」者。今其是矣。\n" +
                "\t\t\t或若「類」等於「「言」」者。\n" +
                "\t\t\t\t加「讀」以一。夫「渾沌碎」之其。充「渾沌列」以其。\n" +
                "\t\t\t\t加「讀」以二。昔之「讀」者。今其是矣。\n" +
                "\t\t\t或若「類」等於「「爻」」者。\n" +
                "\t\t\t\t加「讀」以一。夫「渾沌碎」之其。\n" +
                "\t\t\t\t若其等於「「陰」」者。充「渾沌列」以陰。\n" +
                "\t\t\t\t若非。充「渾沌列」以陽也。\n" +
                "\t\t\t\t加「讀」以二。昔之「讀」者。今其是矣。\n" +
                "\t\t\t若非\n" +
                "\t\t\t\t吾有一數。名之曰「層」。\n" +
                "\t\t\t\t加「讀」以一。名之曰「次讀」。\n" +
                "\t\t\t\t吾有一列。名之曰「句」。\n" +
                "\t\t\t\t恆為是。若「次讀」大於「渾沌碎」之長者乃止也。\n" +
                "\t\t\t\t\t若「渾沌碎」之「次讀」等於「「物」」者。\n" +
                "\t\t\t\t\t\t加「層」以一。昔之「層」者。今其是矣。\n" +
                "\t\t\t\t\t或若「渾沌碎」之「次讀」等於「「列」」者。\n" +
                "\t\t\t\t\t\t加「層」以一。昔之「層」者。今其是矣。\n" +
                "\t\t\t\t\t或若「渾沌碎」之「次讀」等於「「也」」者。\n" +
                "\t\t\t\t\t\t若「層」等於零者。\n" +
                "\t\t\t\t\t\t\t若「類」等於「「物」」者。\n" +
                "\t\t\t\t\t\t\t\t施「食物」於「句」。充「渾沌列」以其。\n" +
                "\t\t\t\t\t\t\t若非。\n" +
                "\t\t\t\t\t\t\t\t施「食列」於「句」。充「渾沌列」以其。\n" +
                "\t\t\t\t\t\t\t云云。\n" +
                "\t\t\t\t\t\t乃止也。\n" +
                "\t\t\t\t\t\t減「層」以一。昔之「層」者。今其是矣。\n" +
                "\t\t\t\t\t云云。\n" +
                "\t\t\t\t\t夫「渾沌碎」之「次讀」。充「句」以其。\n" +
                "\t\t\t\t加「次讀」以一。昔之「次讀」者。今其是矣云云。\n" +
                "\t\t\t\t加「次讀」以一。昔之「讀」者。今其是矣\n" +
                "\t\t\t云云。\n" +
                "\t\t云云。\n" +
                "\t\t乃得「渾沌列」。\n" +
                "\t是謂「食列」之術也。\n" +
                "\n" +
                "\n" +
                "\n" +
                "\t吾有一術名之曰「食物」。欲行是術。必先得一列。曰「渾沌碎」。乃行是術曰。\n" +
                "\t\t吾有一物。名之曰「渾沌物」。\n" +
                "\t\t有數二。名之曰「讀」。\n" +
                "\t\t恆為是。若「讀」大於「渾沌碎」之長者乃止也。\n" +
                "\t\t\t夫「渾沌碎」之「讀」。名之曰「端」。\n" +
                "\t\t\t加「讀」以一。夫「渾沌碎」之其。名之曰「類」。\n" +
                "\n" +
                "\t\t\t若「類」等於「「數」」者。\n" +
                "\t\t\t\t加「讀」以二。夫「渾沌碎」之其。取一以施「食數」。施「置物」於「渾沌物」於「端」於其。\n" +
                "\t\t\t\t加「讀」以四。昔之「讀」者。今其是矣。\n" +
                "\t\t\t或若「類」等於「「言」」者。\n" +
                "\t\t\t\t加「讀」以二。夫「渾沌碎」之其。施「置物」於「渾沌物」於「端」於其。\n" +
                "\t\t\t\t加「讀」以四。昔之「讀」者。今其是矣。\n" +
                "\t\t\t或若「類」等於「「爻」」者。\n" +
                "\t\t\t\t加「讀」以二。夫「渾沌碎」之其。\n" +
                "\t\t\t\t若其等於「「陰」」者。施「置物」於「渾沌物」於「端」於陰。\n" +
                "\t\t\t\t若非。施「置物」於「渾沌物」於「端」於陽也。\n" +
                "\t\t\t\t加「讀」以四。昔之「讀」者。今其是矣。\n" +
                "\t\t\t若非\n" +
                "\t\t\t\t吾有一數。名之曰「層」。\n" +
                "\t\t\t\t加「讀」以二。名之曰「次讀」。\n" +
                "\t\t\t\t吾有一列。名之曰「句」。\n" +
                "\t\t\t\t恆為是。若「次讀」大於「渾沌碎」之長者乃止也。\n" +
                "\t\t\t\t\t若「渾沌碎」之「次讀」等於「「物」」者。\n" +
                "\t\t\t\t\t\t加「層」以一。昔之「層」者。今其是矣。\n" +
                "\t\t\t\t\t或若「渾沌碎」之「次讀」等於「「列」」者。\n" +
                "\t\t\t\t\t\t加「層」以一。昔之「層」者。今其是矣。\n" +
                "\t\t\t\t\t或若「渾沌碎」之「次讀」等於「「也」」者。\n" +
                "\t\t\t\t\t\t若「層」等於零者。\n" +
                "\t\t\t\t\t\t\t若「類」等於「「物」」者。\n" +
                "\t\t\t\t\t\t\t\t施「食物」於「句」。施「置物」於「渾沌物」於「端」於其。\n" +
                "\t\t\t\t\t\t\t若非。\n" +
                "\t\t\t\t\t\t\t\t施「食列」於「句」。施「置物」於「渾沌物」於「端」於其。\n" +
                "\t\t\t\t\t\t\t云云。\n" +
                "\t\t\t\t\t\t乃止也。\n" +
                "\t\t\t\t\t\t減「層」以一。昔之「層」者。今其是矣。\n" +
                "\t\t\t\t\t云云。\n" +
                "\t\t\t\t\t夫「渾沌碎」之「次讀」。充「句」以其。\n" +
                "\t\t\t\t加「次讀」以一。昔之「次讀」者。今其是矣云云。\n" +
                "\t\t\t\t加「次讀」以二。昔之「讀」者。今其是矣\n" +
                "\t\t\t云云。\n" +
                "\t\t云云。\n" +
                "\t\t乃得「渾沌物」。\n" +
                "\t是謂「食物」之術也。\n" +
                "\n" +
                "\t夫「渾沌碎」之其餘。取一以施「食物」。乃得矣。\n" +
                "\n" +
                "是謂「食渾沌」之術也。\n" +
                "\n" +
                "\n" +
                "今有一術。名之曰「包渾沌」。欲行是術。必先得一物。曰「渾沌物」。乃行是術曰。\n" +
                "\t吾有一言。曰「「　」」名之曰「挪符」。\n" +
                "\t吾有一言。曰「「\\n」」名之曰「抬符」。\n" +
                "\t吾有一術。名之曰「包數」。欲行是術。必先得一數曰「甲」。乃行是術曰。\n" +
                "\t\t吾有一言。名之曰「正負」。\n" +
                "\t\t若「甲」小於零者。\n" +
                "\t\t\t乘「甲」以負一。昔之「甲」者。今其是矣。\n" +
                "\t\t\t昔之「正負」者。今「「負」」是矣。\n" +
                "\t\t云云。\n" +
                "\t\t除「甲」以一。所餘幾何。名之曰「小數」\n" +
                "\t\t減「小數」於「甲」。名之曰「整數」。\n" +
                "\t\t吾有二言。名之曰「小」曰「整」。\n" +
                "\t\t恆為是。若「整數」不大於零者乃止也。\n" +
                "\t\t\t除「整數」以十。所餘幾何。名之曰「位」。\n" +
                "\t\t\t加「位」以一。夫「位名」之其。加其以「整」。昔之「整」者。今其是矣。\n" +
                "\t\t\t減「整數」以「位」。除其以十。昔之「整數」者。今其是矣。\n" +
                "\t\t云云。\n" +
                "\t\t恆為是。若「小數」不大於零者乃止也。\n" +
                "\t\t\t乘「小數」以十。昔之「小數」者。今其是矣。\n" +
                "\t\t\t除「小數」以一。所餘幾何。名之曰「位」。\n" +
                "\t\t\t加「位」以一。夫「位名」之其。加其於「小」。昔之「小」者。今其是矣。\n" +
                "\t\t\t減「小數」以「位」。昔之「小數」者。今其是矣。\n" +
                "\t\t云云。\n" +
                "\t\t加「正負」以「整」。昔之「整」者。今其是矣。\n" +
                "\t\t夫「小」之長。若其然者。\n" +
                "\t\t\t加「整」以「「·」」。加其以「小」。乃得矣。\n" +
                "\t\t云云。\n" +
                "\t\t乃得「整」。\n" +
                "\t是謂「包數」之術也。\n" +
                "\n" +
                "\t吾有一術。名之曰「暗包渾沌」。欲行是術。必先得一言曰「類」。一元曰「實」。一數曰「挪抬」。乃行是術曰。\n" +
                "\t\t吾有一言。名之曰「渾沌語」。\n" +
                "\t\t若「類」等於「「物」」者。\n" +
                "\t\t\t加「渾沌語」以「抬符」昔之「渾沌語」者。今其是矣。\n" +
                "\t\t\t夫「實」。加「挪抬」以一。取二以施「包物」。加其於「渾沌語」。昔之「渾沌語」者。今其是矣。\n" +
                "\t\t\t為是「挪抬」遍。加「渾沌語」以「挪符」。昔之「渾沌語」者。今其是矣也。\n" +
                "\t\t\t加「渾沌語」以「「也」」加其以「抬符」。昔之「渾沌語」者。今其是矣。\n" +
                "\n" +
                "\t\t或若「類」等於「「列」」者。\n" +
                "\t\t\t加「渾沌語」以「抬符」昔之「渾沌語」者。今其是矣。\n" +
                "\t\t\t夫「實」。加「挪抬」以一。取二以施「包列」。加其於「渾沌語」。昔之「渾沌語」者。今其是矣。\n" +
                "\t\t\t為是「挪抬」遍。加「渾沌語」以「挪符」。昔之「渾沌語」者。今其是矣也。\n" +
                "\t\t\t加「渾沌語」以「「也」」加其以「抬符」。昔之「渾沌語」者。今其是矣。\n" +
                "\n" +
                "\t\t或若「類」等於「「言」」者。\n" +
                "\t\t\t加「渾沌語」以「引起」加其以「實」加其以「引迄」。加其以「抬符」昔之「渾沌語」者。今其是矣。\n" +
                "\t\t或若「類」等於「「爻」」者。\n" +
                "\t\t\t吾有一言。曰「「陽」」。名之曰「爻名」\n" +
                "\t\t\t夫「實」。若其不然者。昔之「爻名」者。今「「陰」」是矣也。\n" +
                "\t\t\t加「渾沌語」以「引起」加其以「爻名」加其以「引迄」。加其以「抬符」昔之「渾沌語」者。今其是矣。\n" +
                "\t\t或若「類」等於「「數」」者。\n" +
                "\t\t\t施「包數」於「實」。名之曰「數名」。\n" +
                "\t\t\t加「渾沌語」以「引起」加其以「數名」加其以「引迄」。加其以「抬符」昔之「渾沌語」者。今其是矣。\n" +
                "\t\t云云。\n" +
                "\t\t乃得「渾沌語」\n" +
                "\t是謂「暗包渾沌」之術也。\n" +
                "\n" +
                "\t吾有一術。名之曰「包列」。欲行是術。必先得一物曰「渾沌列」。一數曰「挪抬」。乃行是術曰。\n" +
                "\t\t吾有一言。名之曰「渾沌語」。\n" +
                "\t\t凡「渾沌列」中之「實」\n" +
                "\t\t\t施「識類」於「實」。名之曰「類」。\n" +
                "\n" +
                "\t\t\t為是「挪抬」遍。加「渾沌語」以「挪符」。昔之「渾沌語」者。今其是矣也。\n" +
                "\t\t\t加「渾沌語」以「類」。\n" +
                "\t\t\t昔之「渾沌語」者。今其是矣。\n" +
                "\n" +
                "\t\t\t施「暗包渾沌」於「類」於「實」於「挪抬」。加其於「渾沌語」。昔之「渾沌語」者。今其是矣。\n" +
                "\t\t云云。\n" +
                "\t\t乃得「渾沌語」\n" +
                "\t是謂「包列」之術也。\n" +
                "\n" +
                "\t吾有一術。名之曰「包物」。欲行是術。必先得一物曰「渾沌物」。一數曰「挪抬」。乃行是術曰。\n" +
                "\n" +
                "\t\t吾有一言。名之曰「渾沌語」。\n" +
                "\n" +
                "\t\t施「列物之端」於「渾沌物」。名之曰「諸端」。\n" +
                "\n" +
                "\t\t凡「諸端」中之「端」\n" +
                "\t\t\t施「取物」於「渾沌物」於「端」。名之曰「實」。\n" +
                "\t\t\t施「識類」於「實」。名之曰「類」。\n" +
                "\n" +
                "\t\t\t為是「挪抬」遍。加「渾沌語」以「挪符」。昔之「渾沌語」者。今其是矣也。\n" +
                "\t\t\t加「渾沌語」以「「之」」。加其以「引起」。加其以「端」。加其以「引迄」。加其以「類」。\n" +
                "\t\t\t昔之「渾沌語」者。今其是矣。\n" +
                "\n" +
                "\t\t\t施「暗包渾沌」於「類」於「實」於「挪抬」。加其於「渾沌語」。昔之「渾沌語」者。今其是矣。\n" +
                "\t\t云云。\n" +
                "\t\t乃得「渾沌語」\n" +
                "\t是謂「包物」之術也。\n" +
                "\n" +
                "\t施「包物」於「渾沌物」於一。名之曰「餛飩語」。\n" +
                "\t加「抬符」以「餛飩語」。加其於「「物」」。加其以「「也」」。乃得矣。\n" +
                "是謂「包渾沌」之術也。\n"));
        long time = ScalaUtils.countTime(()->{
            compiler.compile(args);
            return null;
        });
        compiler.getServerLogger().debug("Use: "+time+"ms");

    }
}
